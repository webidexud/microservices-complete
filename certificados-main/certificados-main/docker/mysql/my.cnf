# üìÇ UBICACI√ìN: docker/mysql/my.cnf
# Configuraci√≥n personalizada de MySQL para microservicio de certificados

[mysqld]
# === CONFIGURACI√ìN B√ÅSICA ===
default-authentication-plugin=mysql_native_password
character-set-server=utf8mb4
collation-server=utf8mb4_general_ci
default-time-zone='-05:00'  # Colombia

# === CONFIGURACI√ìN DE MEMORIA ===
innodb_buffer_pool_size=128M
key_buffer_size=32M
max_allowed_packet=50M
thread_cache_size=50
query_cache_size=32M
tmp_table_size=32M
max_heap_table_size=32M

# === CONFIGURACI√ìN DE CONEXIONES ===
max_connections=100
connect_timeout=60
wait_timeout=28800
interactive_timeout=28800

# === CONFIGURACI√ìN DE LOGS ===
general_log=1
general_log_file=/var/log/mysql/general.log
log_error=/var/log/mysql/error.log
slow_query_log=1
slow_query_log_file=/var/log/mysql/slow.log
long_query_time=2

# === CONFIGURACI√ìN DE INNODB ===
innodb_file_per_table=1
innodb_flush_log_at_trx_commit=1
innodb_lock_wait_timeout=120
innodb_log_buffer_size=16M
innodb_log_file_size=48M

# === CONFIGURACI√ìN DE SEGURIDAD ===
local_infile=0
secure_file_priv=/var/lib/mysql-files/

# === CONFIGURACI√ìN ESPEC√çFICA PARA CERTIFICADOS ===
# Optimizada para operaciones de lectura frecuentes (consultas p√∫blicas)
# y escrituras moderadas (generaci√≥n de certificados)

[mysql]
default-character-set=utf8mb4

[client]
default-character-set=utf8mb4